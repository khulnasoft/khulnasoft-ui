"use strict";(self.webpackChunk_khulnasoft_khulnasoft_ui=self.webpackChunk_khulnasoft_khulnasoft_ui||[]).push([[504],{"./src/components/intersection/index.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:()=>Basic,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_templates_flex__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/templates/flex/index.js"),___WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/intersection/index.js");const Basic=()=>react__WEBPACK_IMPORTED_MODULE_0__.createElement(_templates_flex__WEBPACK_IMPORTED_MODULE_1__.default,{height:"3000px",column:!0},react__WEBPACK_IMPORTED_MODULE_0__.createElement(___WEBPACK_IMPORTED_MODULE_2__.default,{fallback:"visible outside the viewport",padding:[8,15],border:!0},"Visible inside the viewport. Scroll down and see the inspect element")),__WEBPACK_DEFAULT_EXPORT__={component:___WEBPACK_IMPORTED_MODULE_2__.default},__namedExportsOrder=["Basic"];Basic.parameters={...Basic.parameters,docs:{...Basic.parameters?.docs,source:{originalSource:'() => <Flex height="3000px" column>\n    <Intersection fallback="visible outside the viewport" padding={[8, 15]} border>\n      Visible inside the viewport. Scroll down and see the inspect element\n    </Intersection>\n  </Flex>',...Basic.parameters?.docs?.source}}}},"./src/components/intersection/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{exports.__esModule=!0,exports.default=void 0;var _react=function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&{}.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}(__webpack_require__("./node_modules/react/index.js")),_usePrevious=_interopRequireDefault(__webpack_require__("./src/hooks/usePrevious/index.js")),_flex=_interopRequireDefault(__webpack_require__("./src/components/templates/flex/index.js")),_useIntersection2=_interopRequireDefault(__webpack_require__("./src/hooks/useIntersection/index.js")),_setRef=_interopRequireDefault(__webpack_require__("./src/mixins/set-ref/index.js")),_excluded=["height","width","fallback","root","rootMargin","threshold","onVisibility","children"];function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r})(e)}function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var Intersection=(0,_react.forwardRef)((function(_ref,parentRef){var _ref$height=_ref.height,height=void 0===_ref$height?"100%":_ref$height,_ref$width=_ref.width,width=void 0===_ref$width?"100%":_ref$width,_ref$fallback=_ref.fallback,fallback=void 0===_ref$fallback?null:_ref$fallback,root=_ref.root,_ref$rootMargin=_ref.rootMargin,rootMargin=void 0===_ref$rootMargin?"0px":_ref$rootMargin,_ref$threshold=_ref.threshold,threshold=void 0===_ref$threshold?0:_ref$threshold,onVisibility=_ref.onVisibility,children=_ref.children,rest=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.includes(n))continue;t[n]=r[n]}return t}(_ref,_excluded),_useIntersection=(0,_useIntersection2.default)({root,rootMargin,threshold,onVisibility}),setRef=_useIntersection[0],ref=_useIntersection[1],visible=_useIntersection[2],prevVisible=(0,_usePrevious.default)(visible),lastHeightRef=(0,_react.useRef)(height);return visible!==prevVisible&&!visible&&ref.current&&(lastHeightRef.current=ref.current.clientHeight+"px"),_react.default.createElement(_flex.default,_extends({ref:function ref(element){setRef(element),(0,_setRef.default)(parentRef,element)},width,height:visible?height:{min:lastHeightRef.current}},rest),function getContent(value){return"function"==typeof value?value():value}(visible?children:fallback))}));exports.default=Intersection;Intersection.__docgenInfo={description:"",methods:[],displayName:"Intersection",props:{height:{defaultValue:{value:'"100%"',computed:!1},required:!1},width:{defaultValue:{value:'"100%"',computed:!1},required:!1},fallback:{defaultValue:{value:"null",computed:!1},required:!1},rootMargin:{defaultValue:{value:'"0px"',computed:!1},required:!1},threshold:{defaultValue:{value:"0",computed:!1},required:!1}}}},"./src/hooks/useIntersection/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{exports.__esModule=!0,exports.default=void 0;var _react=__webpack_require__("./node_modules/react/index.js"),_uuid=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(__webpack_require__("./src/mixins/uuid/index.js"));var roots=new Map,observers={},totalObservers={},callbacks=new Map,getId=function getId(_ref){var root=_ref.root,rootMargin=_ref.rootMargin,threshold=_ref.threshold;return function getRootId(root){if(roots.has(root))return roots.get(root);var id=(0,_uuid.default)();return roots.set(root,id),id}(root)+"|"+rootMargin+"|"+threshold},intersectionCallback=function intersectionCallback(entries){entries.forEach((function(entry){var target=entry.target,isIntersecting=entry.isIntersecting,cb=callbacks.get(target);null==cb||cb(isIntersecting)}))};exports.default=function _default(_ref2){var root=_ref2.root,rootMargin=_ref2.rootMargin,threshold=_ref2.threshold,onVisibility=_ref2.onVisibility,_ref2$defaultVisible=_ref2.defaultVisible,defaultVisible=void 0!==_ref2$defaultVisible&&_ref2$defaultVisible,ref=(0,_react.useRef)(),unObserveRef=(0,_react.useRef)(),_useState=(0,_react.useState)(defaultVisible),visible=_useState[0],setVisible=_useState[1],setRef=(0,_react.useCallback)((function(element){if(ref.current=element,null==unObserveRef.current||unObserveRef.current(),unObserveRef.current=null,element){var options={root,rootMargin,threshold};unObserveRef.current=function observe(callback,element,options){var id=getId(options);id in observers||(observers[id]=new IntersectionObserver(intersectionCallback,options),totalObservers[id]=0);var observer=observers[id];return observer.observe(element),callbacks.set(element,callback),totalObservers[id]=totalObservers[id]+1,function(){callbacks.delete(element),observer.unobserve(element),totalObservers[id]=totalObservers[id]-1,totalObservers[id]>0||(observer.disconnect(),callbacks.delete(callback),delete observers[id],delete totalObservers[id])}}((function(value){onVisibility&&onVisibility(value),setVisible(value)}),element,options)}}),[root,rootMargin,threshold,onVisibility]);return(0,_react.useEffect)((function(){return function(){null==unObserveRef.current||unObserveRef.current(),unObserveRef.current=null}}),[]),[setRef,ref,visible]}},"./src/hooks/usePrevious/index.js":(__unused_webpack_module,exports,__webpack_require__)=>{exports.__esModule=!0,exports.default=void 0;var _react=__webpack_require__("./node_modules/react/index.js");exports.default=function _default(value,distinct){void 0===distinct&&(distinct=!1);var prevRef=(0,_react.useRef)();return(0,_react.useEffect)((function(){prevRef.current=value}),[distinct?value:""]),prevRef.current}},"./src/mixins/set-ref/index.js":(__unused_webpack_module,exports)=>{exports.__esModule=!0,exports.default=void 0;exports.default=function _default(ref,node){"function"==typeof ref?ref(node):ref&&(ref.current=node)}},"./src/mixins/uuid/index.js":(__unused_webpack_module,exports)=>{exports.__esModule=!0,exports.default=void 0;var counter=0;exports.default=function _default(){return--counter}}}]);